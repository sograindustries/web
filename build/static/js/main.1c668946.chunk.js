(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{114:function(e,t,a){e.exports=a(132)},119:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),o=(a(119),a(23)),l=a(31);var u=Object(l.c)({isAuthenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"ACTION_LOGIN_FAILED":case"ACTION_LOGOUT_SUCCESS":return!1;case"ACTION_LOGIN_SUCCESS":return!0;default:return e}},jwt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTION_LOGIN_SUCCESS":return t.payload.jwt;case"ACTION_LOGIN_START":case"ACTION_LOGIN_FAILED":return null;default:return e}}}),s=Object(l.c)({session:u}),p=a(80),m=a(10),d=a.n(m),f=a(15),h=a(18),g=a(100),b=a(96),v=a(21),E=a(171),w=a(173),O=a(170),j=a(183),y=a(175),C=a(174),S=a(56),k=a.n(S),x=a(52),N=a(85),I=a(167),P=a(50);function T(e,t,a){return function(){var n=Object(f.a)(d.a.mark((function n(r){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.auth.login(e,t);case 3:return c=n.sent,n.abrupt("return",c);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}function A(e){return function(){var t=Object(f.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.auth.signOut();case 3:a(Object(P.action)("ACTION_LOGOUT_SUCCESS")),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.error("Signout error: ",t.t0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function U(e,t,a){return function(){var n=Object(f.a)(d.a.mark((function n(r){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.auth.signup(e,t);case 3:return c=n.sent,n.abrupt("return",c);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}var L=a(81),_=a(82),G=a(99),W=a(83),D=a(101),F=a(51),B=new F.d({UserPoolId:"us-east-1_9vsr32SCz",ClientId:"1hojv8fbr0nkft2p2tbvgksi46"}),z={auth:{login:function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={Username:t,Password:a},c=new F.a(r);new F.b({Username:t,Pool:B}).authenticateUser(c,{onSuccess:function(t){e(t.getIdToken().getJwtToken())},onFailure:function(e){n(e)}})})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),signup:function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){B.signUp(t,a,[new F.c({Name:"email",Value:t})],[],(function(t,a){t?n(t):a?e(a.user):n(new Error("No result available."))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getCurrentUser:function(){return new Promise((function(e,t){var a=B.getCurrentUser();a?a.getSession((function(a,n){if(a)t(a);else{console.log("session validity: "+n.isValid()),console.log("SESSION: ",n);var r=n.getIdToken();e({jwt:r.getJwtToken(),username:r.payload.username})}})):e(null)}))},signOut:function(){return new Promise((function(e,t){var a=B.getCurrentUser();a?(a.signOut(),e()):t(new Error("User is not available."))}))}}},M=function(e){return function(t){function a(){return Object(L.a)(this,a),Object(G.a)(this,Object(W.a)(a).apply(this,arguments))}return Object(D.a)(a,t),Object(_.a)(a,[{key:"render",value:function(){return n.createElement(e,Object.assign({},this.props,{api:z}))}}]),a}(n.Component)};var q=M(Object(v.g)(Object(o.b)(void 0,(function(e,t){return{onSingupClick:function(){t.history.push(Fe)},onSubmitClick:function(){var a=Object(f.a)(d.a.mark((function a(n,r){var c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e(T(n,r,t.api));case 3:return c=a.sent,console.log("RESPONSE: ",c),t.history.push("protected"),a.abrupt("return",[]);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",[a.t0.code]);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}}))((function(e){var t=R(),a=r.a.useState(""),n=Object(h.a)(a,2),c=n[0],i=n[1],o=r.a.useState(""),l=Object(h.a)(o,2),u=l[0],s=l[1],p=r.a.useState(null),m=Object(h.a)(p,2),g=m[0],b=m[1];return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(E.a,{className:t.avatar},r.a.createElement(k.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){i(e.target.value)}}),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){s(e.target.value)}}),g&&r.a.createElement("h4",{className:t.errorText},g),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:Object(f.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitClick(c,u);case 2:(a=t.sent).length>0?b(a.join(", ")):b(null);case 4:case"end":return t.stop()}}),t)})))},"Sign In"),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0},r.a.createElement(y.a,{href:"#",variant:"body2",onClick:e.onSingupClick},"Don't have an account? Sign Up")))))})))),R=Object(N.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},errorText:{color:"red"}}}));var J=M(Object(v.g)(Object(o.b)(void 0,(function(e,t){return{onSubmitClick:function(){var a=Object(f.a)(d.a.mark((function a(n,r){var c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e(U(n,r,t.api));case 3:return c=a.sent,console.log(c),a.next=7,e(T(n,r,t.api));case 7:return a.sent,t.history.push("protected"),a.abrupt("return",[]);case 12:return a.prev=12,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",[a.t0.message]);case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()}}))((function(e){var t=H(),a=r.a.useState(""),n=Object(h.a)(a,2),c=n[0],i=n[1],o=r.a.useState(""),l=Object(h.a)(o,2),u=l[0],s=l[1],p=r.a.useState(""),m=Object(h.a)(p,2),g=(m[0],m[1]),b=r.a.useState(null),v=Object(h.a)(b,2),S=v[0],N=v[1];return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(E.a,{className:t.avatar},r.a.createElement(k.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){i(e.target.value)}}),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){s(e.target.value)}}),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repeat-password",label:"Repeat Password",type:"password",id:"repeat-password",onChange:function(e){g(e.target.value)}}),S&&r.a.createElement("h4",{className:t.errorText},S),r.a.createElement(w.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:Object(f.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitClick(c,u);case 2:(a=t.sent).length>0&&N(a.join(", "));case 4:case"end":return t.stop()}}),t)})))},"Sign In"),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0},r.a.createElement(y.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))})))),H=Object(N.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},errorText:{color:"red"}}}));var V=function(){return n.createElement("div",null,"main")},X=a(97),$=a(186),K=a(133),Q=a(87),Y=a.n(Q),Z=a(88),ee=a.n(Z);var te=Object(N.a)((function(e){return Object($.a)({root:{flexGrow:1},paper:{padding:e.spacing(1),color:e.palette.text.primary}})})),ae=function(e){var t=te({});function a(e){var a=e.items;return r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(C.a,{item:!0,xs:4,key:e.uuid},r.a.createElement(K.a,{className:t.paper},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(x.a,{variant:"h5",component:"h3",style:{flexGrow:1}},e.name),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ee.a,{style:{color:e.batteryPct>.2?"green":"red"}}),r.a.createElement(x.a,null,(100*e.batteryPct).toFixed(0),"%"))),r.a.createElement(x.a,{variant:"subtitle1",style:{color:"gray"}},e.uuid),r.a.createElement(x.a,null,"Sample Count: "+(e.sampleCount||0)),r.a.createElement(x.a,null,"Last uploaded "+Y.a.unix(e.lastUploadEpoch).fromNow())))})))}for(var n=[],c=Object(X.a)(e.patchList),i=0;i<c.length;i+=3)n.push(c.slice(i,Math.min(c.length,i+3)));return r.a.createElement("div",{className:t.root},r.a.createElement(C.a,{container:!0,spacing:1},n.map((function(e){return r.a.createElement(C.a,{container:!0,item:!0,xs:12,spacing:3,key:e.map((function(e){return e})).join("-")},r.a.createElement(a,{items:e}))}))))};var ne=Object(o.b)((function(e){return{jwt:e.session.jwt}}))((function(e){var t=n.useState([]),a=Object(h.a)(t,2),r=a[0],c=a[1];return n.useEffect((function(){e.jwt&&fetch("https://5r2zhe6294.execute-api.us-east-1.amazonaws.com/production/patches",{method:"GET",headers:{"Content-Type":"application/json",Authorization:e.jwt}}).then((function(e){return e.json()})).then(c)}),[]),n.createElement("div",null,n.createElement(ae,{patchList:r}))})),re=a(33),ce=a(3),ie=a(19),oe=a(90),le=a.n(oe),ue=a(185),se=a(176),pe=a(177),me=a(172),de=a(180),fe=a(178),he=a(94),ge=a.n(he),be=a(93),ve=a.n(be),Ee=a(89),we=a.n(Ee),Oe=a(95),je=a.n(Oe),ye=a(92),Ce=a.n(ye),Se=a(91),ke=a.n(Se),xe=a(134),Ne=a(181),Ie=a(182),Pe=a(98),Te=a(179);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach((function(t){Object(re.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Le=Object(N.a)((function(e){return Object($.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(re.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Ue({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},title:{flexGrow:1}})}));var _e=Object(v.g)(M(Object(o.b)(void 0,(function(e,t){var a=t.api,n=t.history;return{onLogoutClick:function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(A(a));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onPatientsMenuClick:function(){n.push(Be)},onPatchesMenuClick:function(){n.push(ze)},onHomeMenuClick:function(){n.push(De)}}}))((function(e){var t,a,n=e.onLogoutClick,c=e.onHomeMenuClick,i=e.onPatientsMenuClick,o=e.onPatchesMenuClick,l=e.children,u=Le(),s=Object(ie.a)(),p=r.a.useState(!1),m=Object(h.a)(p,2),d=m[0],f=m[1],g=r.a.useState(null),b=Object(h.a)(g,2),v=b[0],E=b[1],w=Boolean(v);return r.a.createElement("div",{className:u.root},r.a.createElement(O.a,null),r.a.createElement(se.a,{position:"fixed",className:Object(ce.a)(u.appBar,Object(re.a)({},u.appBarShift,d))},r.a.createElement(pe.a,null,r.a.createElement(fe.a,{color:"inherit","aria-label":"open drawer",onClick:function(){f(!0)},edge:"start",className:Object(ce.a)(u.menuButton,Object(re.a)({},u.hide,d))},r.a.createElement(we.a,null)),r.a.createElement(x.a,{variant:"h6",className:u.title},"ARGOS"),r.a.createElement("div",null,r.a.createElement(fe.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){E(e.currentTarget)},color:"inherit"},r.a.createElement(le.a,null)),r.a.createElement(Pe.a,{id:"menu-appbar",anchorEl:v,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:w,onClose:function(){E(null)}},r.a.createElement(Te.a,{onClick:n},"Logout"))))),r.a.createElement(ue.a,{variant:"permanent",className:Object(ce.a)(u.drawer,(t={},Object(re.a)(t,u.drawerOpen,d),Object(re.a)(t,u.drawerClose,!d),t)),classes:{paper:Object(ce.a)((a={},Object(re.a)(a,u.drawerOpen,d),Object(re.a)(a,u.drawerClose,!d),a))},open:d},r.a.createElement("div",{className:u.toolbar},r.a.createElement(fe.a,{onClick:function(){f(!1)}},"rtl"===s.direction?r.a.createElement(ke.a,null):r.a.createElement(Ce.a,null))),r.a.createElement(de.a,null),r.a.createElement(me.a,null,r.a.createElement(xe.a,{button:!0,key:"home",onClick:c},r.a.createElement(Ne.a,null,r.a.createElement(ve.a,null)),r.a.createElement(Ie.a,{primary:"Home"})),r.a.createElement(xe.a,{button:!0,key:"patient_list",onClick:i},r.a.createElement(Ne.a,null,r.a.createElement(ge.a,null)),r.a.createElement(Ie.a,{primary:"Patients"}))),r.a.createElement(de.a,null),r.a.createElement(me.a,null,r.a.createElement(xe.a,{button:!0,key:"patches",onClick:o},r.a.createElement(Ne.a,null,r.a.createElement(je.a,null)),r.a.createElement(Ie.a,{primary:"Patches"})))),r.a.createElement("main",{className:u.content},r.a.createElement("div",{className:u.toolbar}),l))}))));var Ge=function(){return n.createElement("div",null,"Patients")},We=function(e){return"/".concat(e)},De="",Fe="signup",Be="patients",ze="patches",Me="login";function qe(){return r.a.createElement(b.a,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{path:We(Fe)},r.a.createElement(J,null)),r.a.createElement(v.b,{path:We(Me)},r.a.createElement(q,null)),r.a.createElement(Re,{path:We(ze)},r.a.createElement(ne,null)),r.a.createElement(Re,{path:We(Be)},r.a.createElement(Ge,null)),r.a.createElement(Re,{path:We(De)},r.a.createElement(V,null))))}var Re=M(Object(o.b)((function(e){return{isAuthenticated:e.session.isAuthenticated}}),(function(e,t){return{attemptAuthFromStorage:function(){var a=Object(f.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.api.auth.getCurrentUser();case 2:(n=a.sent)&&e((r=n.username,c=n.jwt,Object(P.action)("ACTION_LOGIN_SUCCESS",{username:r,jwt:c})));case 4:case"end":return a.stop()}var r,c}),a)})));return function(){return a.apply(this,arguments)}}()}}))((function(e){var t=e.children,a=e.isAuthenticated,n=e.attemptAuthFromStorage,c=Object(g.a)(e,["children","isAuthenticated","attemptAuthFromStorage"]),i=r.a.useState(!1),o=Object(h.a)(i,2),l=o[0],u=o[1];return r.a.useEffect((function(){a||n().finally((function(){u(!0)}))}),[a,n]),l||a?r.a.createElement(_e,null,r.a.createElement(v.b,Object.assign({},c,{render:function(e){var n=e.location;return a?t:r.a.createElement(v.a,{to:{pathname:"/login",state:{from:n}}})}}))):r.a.createElement("div",null,"Loading....")}))),Je=Object(l.d)(s,void 0,Object(l.a)(p.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){return r.a.createElement(o.a,{store:Je},r.a.createElement(qe,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[114,1,2]]]);
//# sourceMappingURL=main.1c668946.chunk.js.map